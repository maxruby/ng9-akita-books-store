(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{lXdu:function(t,e,o){"use strict";o.r(e);var n=o("ofXK"),i=o("tyNb"),r=o("zP0r"),c=o("pLZG"),s=o("Kj3r"),l=o("eIep"),a=o("XNiG"),u=o("1G5W");function p(t){return"function"==typeof t}const b=(t,e="ngOnDestroy")=>o=>{const n=t[e];if(!1===p(n))throw new Error(`${t.constructor.name} is using untilDestroyed but doesn't implement ${e}`);return t.__takeUntilDestroy||(t.__takeUntilDestroy=new a.a,t[e]=function(){p(n)&&n.apply(this,arguments),t.__takeUntilDestroy.next(!0),t.__takeUntilDestroy.complete()}),o.pipe(Object(u.a)(t.__takeUntilDestroy))};var d=o("fXoL"),h=o("gRcL"),f=o("nYHP"),m=o("MSSf"),g=o("A2Vd"),k=o("G/Ji"),w=o("IRfi");function y(t,e){if(1&t&&(d.Tb(0,"span"),d.wc(1),d.Rb()),2&t){const t=d.ec();d.Ab(1),d.xc(t.error)}}let S=(()=>{class t{constructor(){this.query="",this.searching=!1,this.error="",this.search=new d.m}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=d.Hb({type:t,selectors:[["app-book-search"]],inputs:{query:"query",searching:"searching",error:"error"},outputs:{search:"search"},decls:9,vars:5,consts:[["matInput","","placeholder","Search for a book",3,"value","keyup"],[3,"diameter","strokeWidth"],[4,"ngIf"]],template:function(t,e){1&t&&(d.Tb(0,"mat-card"),d.Tb(1,"mat-card-title"),d.wc(2,"Find a Book"),d.Rb(),d.Tb(3,"mat-card-content"),d.Tb(4,"mat-form-field"),d.Tb(5,"input",0),d.bc("keyup",(function(t){return e.search.emit(t.target.value)})),d.Rb(),d.Rb(),d.Ob(6,"mat-spinner",1),d.Rb(),d.Tb(7,"mat-card-footer"),d.vc(8,y,2,1,"span",2),d.Rb(),d.Rb()),2&t&&(d.Ab(5),d.kc("value",e.query),d.Ab(1),d.Eb("show",e.searching),d.kc("diameter",30)("strokeWidth",3),d.Ab(2),d.kc("ngIf",e.error))},directives:[m.a,m.h,m.c,w.a,g.a,k.b,m.d,n.j],styles:["mat-card-content[_ngcontent-%COMP%], mat-card-footer[_ngcontent-%COMP%], mat-card-title[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center}mat-card-footer[_ngcontent-%COMP%]{color:red;padding:5px 0}.mat-form-field[_ngcontent-%COMP%]{min-width:300px;margin-right:10px}.mat-spinner[_ngcontent-%COMP%]{position:relative;top:10px;left:10px;visibility:hidden}.mat-spinner.show[_ngcontent-%COMP%]{visibility:visible}"]}),t})();var v=o("LRne"),T=o("xgIS"),x=o("5+tZ"),O=o("lJxs"),C=o("vkgz"),D=o("7o/Q"),I=o("D0XW");class M{constructor(t,e){this.period=t,this.scheduler=e}call(t,e){return e.subscribe(new P(t,this.period,this.scheduler))}}class P extends D.a{constructor(t,e,o){super(t),this.period=e,this.scheduler=o,this.hasValue=!1,this.add(o.schedule(R,e,{subscriber:this,period:e}))}_next(t){this.lastValue=t,this.hasValue=!0}notifyNext(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))}}function R(t){let{subscriber:e,period:o}=t;e.notifyNext(),this.schedule(t,o)}function _(t,e,o,n){const i=window&&!!window.document&&window.document.documentElement;let r=i&&e?window:o;if(t&&(r=t&&i&&"string"==typeof t?function(t,e,o){return(o?window.document:e).querySelector(t)}(t,o.nativeElement,n):t,!r))throw new Error("ngx-infinite-scroll {resolveContainerElement()}: selector for");return r}function U(t){return t&&!t.firstChange}const j={clientHeight:"clientHeight",offsetHeight:"offsetHeight",scrollHeight:"scrollHeight",pageYOffset:"pageYOffset",offsetTop:"offsetTop",scrollTop:"scrollTop",top:"top"},A={clientHeight:"clientWidth",offsetHeight:"offsetWidth",scrollHeight:"scrollWidth",pageYOffset:"pageXOffset",offsetTop:"offsetLeft",scrollTop:"scrollLeft",top:"left"};class H{constructor(t=!0){this.vertical=t,this.propsMap=t?j:A}clientHeightKey(){return this.propsMap.clientHeight}offsetHeightKey(){return this.propsMap.offsetHeight}scrollHeightKey(){return this.propsMap.scrollHeight}pageYOffsetKey(){return this.propsMap.pageYOffset}offsetTopKey(){return this.propsMap.offsetTop}scrollTopKey(){return this.propsMap.scrollTop}topKey(){return this.propsMap.top}}function W(t){return["Window","global"].some(e=>Object.prototype.toString.call(t).includes(e))}function K(t,e){return t?e.document.documentElement:null}function N(t,e){const o=function({container:t,isWindow:e,axis:o}){const{offsetHeightKey:n,clientHeightKey:i}=B(o);return Q(t,e,n,i)}(e);return e.isWindow?function(t,e,o){const{axis:n,container:i,isWindow:r}=o,{offsetHeightKey:c,clientHeightKey:s}=B(n),l=t+$(K(r,i),n,r),a=Q(e.nativeElement,r,c,s);return{height:t,scrolled:l,totalToScroll:function(t,e,o){const n=e.topKey();if(t.getBoundingClientRect)return t.getBoundingClientRect()[n]+$(t,e,o)}(e.nativeElement,n,r)+a,isWindow:r}}(o,t,e):function(t,e,o){const{axis:n,container:i}=o;return{height:t,scrolled:i[n.scrollTopKey()],totalToScroll:i[n.scrollHeightKey()],isWindow:!1}}(o,0,e)}function B(t){return{offsetHeightKey:t.offsetHeightKey(),clientHeightKey:t.clientHeightKey()}}function Q(t,e,o,n){if(isNaN(t[o])){const o=K(e,t);return o?o[n]:0}return t[o]}function $(t,e,o){const n=e.pageYOffsetKey(),i=e.scrollTopKey(),r=e.offsetTopKey();return isNaN(window[n])?K(o,t)[i]:t.ownerDocument?t.ownerDocument.defaultView[n]:t[r]}function L(t,e,o){let n,i;if(t.totalToScroll<=0)return!1;const r=t.isWindow?t.scrolled:t.height+t.scrolled;return o?(n=(t.totalToScroll-r)/t.totalToScroll,i=e.down/10):(n=t.scrolled/(t.scrolled+(t.totalToScroll-r)),i=e.up/10),n<=i}class E{constructor({totalToScroll:t}){this.lastScrollPosition=0,this.lastTotalToScroll=0,this.totalToScroll=0,this.triggered={down:0,up:0},this.totalToScroll=t}updateScrollPosition(t){return this.lastScrollPosition=t}updateTotalToScroll(t){this.lastTotalToScroll!==t&&(this.lastTotalToScroll=this.totalToScroll,this.totalToScroll=t)}updateScroll(t,e){this.updateScrollPosition(t),this.updateTotalToScroll(e)}updateTriggeredFlag(t,e){e?this.triggered.down=t:this.triggered.up=t}isTriggeredScroll(t,e){return e?this.triggered.down===t:this.triggered.up===t}}const X={DOWN:"[NGX_ISE] DOWN",UP:"[NGX_ISE] UP"};function z(t){const{scrollDown:e,stats:{scrolled:o}}=t;return{type:e?X.DOWN:X.UP,payload:{currentScrollPosition:o}}}let V=(()=>{class t{constructor(t,e){this.element=t,this.zone=e,this.scrolled=new d.m,this.scrolledUp=new d.m,this.infiniteScrollDistance=2,this.infiniteScrollUpDistance=1.5,this.infiniteScrollThrottle=150,this.infiniteScrollDisabled=!1,this.infiniteScrollContainer=null,this.scrollWindow=!0,this.immediateCheck=!1,this.horizontal=!1,this.alwaysCallback=!1,this.fromRoot=!1}ngAfterViewInit(){this.infiniteScrollDisabled||this.setup()}ngOnChanges({infiniteScrollContainer:t,infiniteScrollDisabled:e,infiniteScrollDistance:o}){const n=U(t),i=U(e),r=U(o),c=!i&&!this.infiniteScrollDisabled||i&&!e.currentValue||r;(n||i||r)&&(this.destroyScroller(),c&&this.setup())}setup(){"undefined"!=typeof window&&this.zone.runOutsideAngular(()=>{this.disposeScroller=function(t){const{scrollContainer:e,scrollWindow:o,element:n,fromRoot:i}=t,r=function({windowElement:t,axis:e}){return function(t,e){return Object.assign({},t,{container:t.isWindow||e&&!e.nativeElement?e:e.nativeElement})}({axis:e,isWindow:W(t)},t)}({axis:new H(!t.horizontal),windowElement:_(e,o,n,i)}),s=new E({totalToScroll:N(n,r)}),l={up:t.upDistance,down:t.downDistance};return function(t){let e=Object(T.a)(t.container,"scroll");return t.throttle&&(e=e.pipe(function(t,e=I.a){return o=>o.lift(new M(t,e))}(t.throttle))),e}({container:r.container,throttle:t.throttle}).pipe(Object(x.a)(()=>Object(v.a)(N(n,r))),Object(O.a)(t=>(function(t,e,o){const{scrollDown:n,fire:i}=function(t,e,o){const n=function(t,e){return t<e.scrolled}(t,e);return{fire:L(e,o,n),scrollDown:n}}(t,e,o);return{scrollDown:n,fire:i,stats:e}})(s.lastScrollPosition,t,l)),Object(C.a)(({stats:t})=>s.updateScroll(t.scrolled,t.totalToScroll)),Object(c.a)(({fire:e,scrollDown:o,stats:{totalToScroll:n}})=>(function(t,e,o){return!(!t||!e)||!(o||!e)})(t.alwaysCallback,e,s.isTriggeredScroll(n,o))),Object(C.a)(({scrollDown:t,stats:{totalToScroll:e}})=>{s.updateTriggeredFlag(e,t)}),Object(O.a)(z))}({fromRoot:this.fromRoot,alwaysCallback:this.alwaysCallback,disable:this.infiniteScrollDisabled,downDistance:this.infiniteScrollDistance,element:this.element,horizontal:this.horizontal,scrollContainer:this.infiniteScrollContainer,scrollWindow:this.scrollWindow,throttle:this.infiniteScrollThrottle,upDistance:this.infiniteScrollUpDistance}).subscribe(t=>this.zone.run(()=>this.handleOnScroll(t)))})}handleOnScroll({type:t,payload:e}){switch(t){case X.DOWN:return this.scrolled.emit(e);case X.UP:return this.scrolledUp.emit(e);default:return}}ngOnDestroy(){this.destroyScroller()}destroyScroller(){this.disposeScroller&&this.disposeScroller.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(d.Nb(d.k),d.Nb(d.y))},t.\u0275dir=d.Ib({type:t,selectors:[["","infiniteScroll",""],["","infinite-scroll",""],["","data-infinite-scroll",""]],inputs:{infiniteScrollDistance:"infiniteScrollDistance",infiniteScrollUpDistance:"infiniteScrollUpDistance",infiniteScrollThrottle:"infiniteScrollThrottle",infiniteScrollDisabled:"infiniteScrollDisabled",infiniteScrollContainer:"infiniteScrollContainer",scrollWindow:"scrollWindow",immediateCheck:"immediateCheck",horizontal:"horizontal",alwaysCallback:"alwaysCallback",fromRoot:"fromRoot"},outputs:{scrolled:"scrolled",scrolledUp:"scrolledUp"},features:[d.yb()]}),t})(),q=(()=>{class t{}return t.\u0275mod=d.Lb({type:t}),t.\u0275inj=d.Kb({factory:function(e){return new(e||t)},providers:[],imports:[[]]}),t})();var J=o("kEI4");let Y=(()=>{class t{transform(t){if(!t)return"Author Unknown";switch(t.length){case 0:return"Author Unknown";case 1:return t[0];case 2:return t.join(" and ");default:const e=t[t.length-1];return`${t.slice(0,-1).join(", ")}, and ${e}`}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=d.Mb({name:"addCommas",type:t,pure:!0}),t})(),F=(()=>{class t{constructor(){}get authors(){return this.book.volumeInfo.authors}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=d.Hb({type:t,selectors:[["app-book-authors"]],inputs:{book:"book"},decls:5,vars:3,consts:[["mat-subheader",""]],template:function(t,e){1&t&&(d.Tb(0,"h5",0),d.wc(1,"Written By:"),d.Rb(),d.Tb(2,"span"),d.wc(3),d.fc(4,"addCommas"),d.Rb()),2&t&&(d.Ab(3),d.yc(" ",d.gc(4,1,e.authors),"\n"))},directives:[J.d],pipes:[Y],styles:["h5[_ngcontent-%COMP%]{margin-bottom:5px}"]}),t})(),G=(()=>{class t{transform(t,e=250){const o=t.replace(/(<([^>]+)>)/gi,"");return t.length>=e?`${o.slice(0,e)}...`:o}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=d.Mb({name:"ellipsis",type:t,pure:!0}),t})();function Z(t,e){if(1&t&&d.Ob(0,"img",4),2&t){const t=d.ec();d.kc("src",t.thumbnail,d.pc)}}function tt(t,e){if(1&t&&(d.Tb(0,"mat-card-subtitle"),d.wc(1),d.fc(2,"ellipsis"),d.Rb()),2&t){const t=d.ec();d.Ab(1),d.xc(d.hc(2,1,t.subtitle,40))}}function et(t,e){if(1&t&&(d.Tb(0,"p"),d.wc(1),d.fc(2,"ellipsis"),d.Rb()),2&t){const t=d.ec();d.Ab(1),d.xc(d.gc(2,1,t.description))}}const ot=function(t){return["/books",t]};let nt=(()=>{class t{constructor(){}get id(){return this.book.id}get title(){return this.book.volumeInfo.title}get subtitle(){return this.book.volumeInfo.subtitle}get description(){return this.book.volumeInfo.description}get thumbnail(){return!!this.book.volumeInfo.imageLinks&&this.book.volumeInfo.imageLinks.smallThumbnail.replace("http:","")}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=d.Hb({type:t,selectors:[["app-book-preview"]],inputs:{book:"book"},decls:12,vars:11,consts:[[3,"routerLink"],["mat-card-sm-image","",3,"src",4,"ngIf"],[4,"ngIf"],[3,"book"],["mat-card-sm-image","",3,"src"]],template:function(t,e){1&t&&(d.Tb(0,"a",0),d.Tb(1,"mat-card"),d.Tb(2,"mat-card-title-group"),d.vc(3,Z,1,1,"img",1),d.Tb(4,"mat-card-title"),d.wc(5),d.fc(6,"ellipsis"),d.Rb(),d.vc(7,tt,3,4,"mat-card-subtitle",2),d.Rb(),d.Tb(8,"mat-card-content"),d.vc(9,et,3,3,"p",2),d.Rb(),d.Tb(10,"mat-card-footer"),d.Ob(11,"app-book-authors",3),d.Rb(),d.Rb(),d.Rb()),2&t&&(d.kc("routerLink",d.lc(9,ot,e.id)),d.Ab(3),d.kc("ngIf",e.thumbnail),d.Ab(2),d.xc(d.hc(6,6,e.title,35)),d.Ab(2),d.kc("ngIf",e.subtitle),d.Ab(2),d.kc("ngIf",e.description),d.Ab(2),d.kc("book",e.book))},directives:[i.f,m.a,m.i,n.j,m.h,m.c,m.d,F,m.f,m.g],pipes:[G],styles:["[_nghost-%COMP%]{display:-webkit-box;display:flex}[_nghost-%COMP%]   a[_ngcontent-%COMP%]{display:-webkit-box;display:flex}mat-card[_ngcontent-%COMP%]{width:400px;margin:15px;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column;-webkit-box-pack:justify;justify-content:space-between}@media only screen and (max-width:768px){mat-card[_ngcontent-%COMP%]{margin:15px 0!important}}mat-card[_ngcontent-%COMP%]:hover{box-shadow:3px 3px 16px -2px rgba(0,0,0,.5)}mat-card-title[_ngcontent-%COMP%]{margin-right:10px}mat-card-title-group[_ngcontent-%COMP%]{margin:0}a[_ngcontent-%COMP%]{color:inherit;text-decoration:none}img[_ngcontent-%COMP%]{width:60px;min-width:60px;margin-left:5px}mat-card-content[_ngcontent-%COMP%]{margin:15px 0 0}span[_ngcontent-%COMP%]{display:inline-block;font-size:13px}mat-card-footer[_ngcontent-%COMP%]{padding:0 25px 25px}"]}),t})();function it(t,e){1&t&&d.Ob(0,"app-book-preview",2),2&t&&d.kc("book",e.$implicit)}let rt=(()=>{class t{constructor(){this.scrolled=new d.m,this.scrolledUp=new d.m,this.scrollDistance=2,this.scrollUpDistance=1.5,this.throttle=50,this.limit=500,this.page=1}ngOnInit(){}onScrollDown(){this.scrolled.emit()}onScrollUp(){this.scrolledUp.emit()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=d.Hb({type:t,selectors:[["app-book-preview-list"]],inputs:{books:"books"},outputs:{scrolled:"scrolled",scrolledUp:"scrolledUp"},decls:2,vars:5,consts:[["infiniteScroll","",1,"book-preview-list",3,"infiniteScrollDistance","infiniteScrollUpDistance","infiniteScrollThrottle","scrollWindow","scrolled","scrolledUp"],[3,"book",4,"ngFor","ngForOf"],[3,"book"]],template:function(t,e){1&t&&(d.Tb(0,"div",0),d.bc("scrolled",(function(t){return e.onScrollDown()}))("scrolledUp",(function(t){return e.onScrollUp()})),d.vc(1,it,1,1,"app-book-preview",1),d.Rb()),2&t&&(d.kc("infiniteScrollDistance",e.scrollDistance)("infiniteScrollUpDistance",e.scrollUpDistance)("infiniteScrollThrottle",e.throttle)("scrollWindow",!1),d.Ab(1),d.kc("ngForOf",e.books))},directives:[V,n.i,nt],styles:["[_nghost-%COMP%]{display:-webkit-box;display:flex;flex-wrap:wrap;-webkit-box-pack:center;justify-content:center}.book-preview-list[_ngcontent-%COMP%]{padding:10px 0;margin-top:30px;height:600px;flex-wrap:wrap;overflow-y:scroll}"]}),t})(),ct=(()=>{class t{constructor(t,e){this.booksQuery=t,this.booksService=e,this.searchQuery=this.booksQuery.getSearchTerm,this.loading$=this.booksQuery.selectLoading(),this.booksQuery.selectSearchTerm$.pipe(Object(r.a)(1),Object(c.a)(Boolean),Object(s.a)(300),b(this)).subscribe(t=>{this.booksService.searchBooks(t)}),this.books$=this.booksQuery.selectResultIds$.pipe(Object(l.a)(t=>this.booksQuery.selectMany(t)))}search(t){this.booksService.updateSearchTerm(t,t!==this.booksQuery.getSearchTerm)}onScrolled(){this.booksService.updatePage("DOWN"),this.booksService.searchBooks(this.booksQuery.getSearchTerm)}onScrolledUp(){this.booksService.updatePage("UP"),this.booksService.searchBooks(this.booksQuery.getSearchTerm)}ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)(d.Nb(h.a),d.Nb(f.a))},t.\u0275cmp=d.Hb({type:t,selectors:[["app-find-book"]],decls:5,vars:10,consts:[[3,"query","searching","error","search"],[3,"books","scrolled","scrolledUp"]],template:function(t,e){1&t&&(d.Tb(0,"app-book-search",0),d.bc("search",(function(t){return e.search(t)})),d.fc(1,"async"),d.fc(2,"async"),d.Rb(),d.Tb(3,"app-book-preview-list",1),d.bc("scrolled",(function(t){return e.onScrolled()}))("scrolledUp",(function(t){return e.onScrolledUp()})),d.fc(4,"async"),d.Rb()),2&t&&(d.kc("query",e.searchQuery)("searching",d.gc(1,4,e.loading$))("error",d.gc(2,6,e.error$)),d.Ab(3),d.kc("books",d.gc(4,8,e.books$)))},directives:[S,rt],pipes:[n.b],styles:[""],changeDetection:0}),t})();var st=o("Xlwt");function lt(t,e){if(1&t&&(d.Tb(0,"mat-card-subtitle"),d.wc(1),d.Rb()),2&t){const t=d.ec(2);d.Ab(1),d.xc(t.subtitle)}}function at(t,e){if(1&t&&d.Ob(0,"img",9),2&t){const t=d.ec(2);d.kc("src",t.thumbnail,d.pc)}}function ut(t,e){if(1&t){const t=d.Ub();d.Tb(0,"button",10),d.bc("click",(function(e){d.nc(t);const o=d.ec(2);return o.remove.emit(o.book)})),d.wc(1," Remove Book from Collection "),d.Rb()}}function pt(t,e){if(1&t){const t=d.Ub();d.Tb(0,"button",5),d.bc("click",(function(e){d.nc(t);const o=d.ec(2);return o.add.emit(o.book)})),d.wc(1," Add Book to Collection "),d.Rb()}}function bt(t,e){if(1&t){const t=d.Ub();d.Tb(0,"mat-card"),d.Tb(1,"mat-card-title-group"),d.Tb(2,"mat-card-title"),d.wc(3),d.Rb(),d.vc(4,lt,2,1,"mat-card-subtitle",0),d.vc(5,at,1,1,"img",1),d.Rb(),d.Tb(6,"mat-card-content"),d.Ob(7,"p",2),d.Rb(),d.Tb(8,"mat-card-footer",3),d.Ob(9,"app-book-authors",4),d.Tb(10,"button",5),d.bc("click",(function(e){return d.nc(t),d.ec().goBack()})),d.wc(11," Back "),d.Rb(),d.Rb(),d.Tb(12,"mat-card-actions",6),d.vc(13,ut,2,0,"button",7),d.vc(14,pt,2,0,"button",8),d.Rb(),d.Rb()}if(2&t){const t=d.ec();d.Ab(3),d.xc(t.title),d.Ab(1),d.kc("ngIf",t.subtitle),d.Ab(1),d.kc("ngIf",t.thumbnail),d.Ab(2),d.kc("innerHtml",t.description,d.oc),d.Ab(2),d.kc("book",t.book),d.Ab(4),d.kc("ngIf",t.inCollection),d.Ab(1),d.kc("ngIf",!t.inCollection)}}let dt=(()=>{class t{constructor(t){this.location=t,this.add=new d.m,this.remove=new d.m}get id(){return this.book.id}get title(){return this.book.volumeInfo.title}get subtitle(){return this.book.volumeInfo.subtitle}get description(){return this.book.volumeInfo.description}get thumbnail(){return this.book.volumeInfo.imageLinks&&this.book.volumeInfo.imageLinks.smallThumbnail&&this.book.volumeInfo.imageLinks.smallThumbnail.replace("http:","")}goBack(){this.location.back()}}return t.\u0275fac=function(e){return new(e||t)(d.Nb(n.g))},t.\u0275cmp=d.Hb({type:t,selectors:[["app-book-detail"]],inputs:{book:"book",inCollection:"inCollection"},outputs:{add:"add",remove:"remove"},decls:1,vars:1,consts:[[4,"ngIf"],["mat-card-sm-image","",3,"src",4,"ngIf"],[3,"innerHtml"],[1,"footer"],[3,"book"],["mat-raised-button","","color","primary",3,"click"],["align","start"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-card-sm-image","",3,"src"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,e){1&t&&d.vc(0,bt,15,7,"mat-card",0),2&t&&d.kc("ngIf",e.book)},directives:[n.j,m.a,m.i,m.h,m.c,m.d,F,st.a,m.b,m.g,m.f],styles:["[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;margin:75px 0}mat-card[_ngcontent-%COMP%]{max-width:600px}mat-card-title-group[_ngcontent-%COMP%]{margin-left:0}img[_ngcontent-%COMP%]{width:60px;min-width:60px;margin-left:5px}mat-card-content[_ngcontent-%COMP%]{margin:15px 0 50px}mat-card-actions[_ngcontent-%COMP%]{margin:25px 0 0!important}mat-card-footer[_ngcontent-%COMP%]{padding:0 25px 25px;position:relative}"]}),t})(),ht=(()=>{class t{constructor(t,e){this.booksQuery=t,this.booksService=e,this.book$=this.booksQuery.selectActive(),this.isSelectedBookInCollection$=this.booksQuery.isInCollection$}updateCollection({id:t}){this.booksService.updateCollection(t)}}return t.\u0275fac=function(e){return new(e||t)(d.Nb(h.a),d.Nb(f.a))},t.\u0275cmp=d.Hb({type:t,selectors:[["app-selected-book-page"]],decls:3,vars:6,consts:[[3,"book","inCollection","add","remove"]],template:function(t,e){1&t&&(d.Tb(0,"app-book-detail",0),d.bc("add",(function(t){return e.updateCollection(t)}))("remove",(function(t){return e.updateCollection(t)})),d.fc(1,"async"),d.fc(2,"async"),d.Rb()),2&t&&d.kc("book",d.gc(1,2,e.book$))("inCollection",d.gc(2,4,e.isSelectedBookInCollection$))},directives:[dt],pipes:[n.b],styles:[""],changeDetection:0}),t})(),ft=(()=>{class t{constructor(t,e){this.bookService=t,this.route=e}ngOnInit(){const t=this.route.snapshot.paramMap.get("id");this.bookService.setActive(t)}}return t.\u0275fac=function(e){return new(e||t)(d.Nb(f.a),d.Nb(i.a))},t.\u0275cmp=d.Hb({type:t,selectors:[["app-view-book-page"]],decls:1,vars:0,template:function(t,e){1&t&&d.Ob(0,"app-selected-book-page")},directives:[ht],styles:[""],changeDetection:0}),t})();var mt=o("JIr8"),gt=o("2tW2");let kt=(()=>{class t{constructor(t,e,o,n){this.googleBooks=t,this.router=e,this.bookQuery=o,this.bookSerivce=n}hasBookInApi(t){return this.googleBooks.retrieveBook(t).pipe(Object(O.a)(t=>!!t),Object(mt.a)(()=>(this.router.navigate(["/404"]),Object(v.a)(!1))))}hasBook(t){return this.bookQuery.hasEntity(t)?(this.bookSerivce.setActive(t),Object(v.a)(!0)):this.hasBookInApi(t)}canActivate(t){return this.hasBook(t.params.id)}}return t.\u0275fac=function(e){return new(e||t)(d.Xb(gt.a),d.Xb(i.d),d.Xb(h.a),d.Xb(f.a))},t.\u0275prov=d.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const wt=[{path:"find",component:ct},{path:":id",component:ft,canActivate:[kt]},{path:"",component:(()=>{class t{constructor(t){this.bookQuery=t,this.books$=this.bookQuery.selectMany(this.bookQuery.collection)}}return t.\u0275fac=function(e){return new(e||t)(d.Nb(h.a))},t.\u0275cmp=d.Hb({type:t,selectors:[["app-collection-page"]],decls:5,vars:3,consts:[[3,"books"]],template:function(t,e){1&t&&(d.Tb(0,"mat-card"),d.Tb(1,"mat-card-title"),d.wc(2,"My Collection"),d.Rb(),d.Rb(),d.Ob(3,"app-book-preview-list",0),d.fc(4,"async")),2&t&&(d.Ab(3),d.kc("books",d.gc(4,1,e.books$)))},directives:[m.a,m.h,rt],pipes:[n.b],styles:["mat-card-title[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center}"],changeDetection:0}),t})()}];let yt=(()=>{class t{}return t.\u0275mod=d.Lb({type:t}),t.\u0275inj=d.Kb({factory:function(e){return new(e||t)},imports:[[i.g.forChild(wt)],i.g]}),t})();var St=o("3Pt+"),vt=o("xJ9m");let Tt=(()=>{class t{}return t.\u0275mod=d.Lb({type:t}),t.\u0275inj=d.Kb({factory:function(e){return new(e||t)}}),t})(),xt=(()=>{class t{}return t.\u0275mod=d.Lb({type:t}),t.\u0275inj=d.Kb({factory:function(e){return new(e||t)},imports:[[n.c,St.k,vt.a,i.g,Tt,q]]}),t})();o.d(e,"BooksModule",(function(){return Ot}));let Ot=(()=>{class t{}return t.\u0275mod=d.Lb({type:t}),t.\u0275inj=d.Kb({factory:function(e){return new(e||t)},providers:[kt],imports:[[n.c,yt,xt,vt.a]]}),t})()}}]);